{% extends "layout.html" %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}

{% set signedIn = 'true' %}

{% block pageTitle %}
  Registration status
{% endblock %}

{% set npqNameHTML %}
  {% if (data['choosenpq'] == "Early headship coaching offer") %}
    Early headship coaching offer
    {% else %}
      {{ data['choosenpq'] or "Executive leadership" }} NPQ
  {% endif %}
{% endset %}

{% set providerHTML %}
  {{ data['provider'] or "LLSE (Leadership Learning Securing Excellence)" }}
{% endset %}

{% set scholarshipfundingHtml %}
  <strong class="govuk-tag govuk-tag--yellow">
    Eligibility in review
  </strong>
  <p class="govuk-!-margin-top-2 govuk-!-margin-bottom-0">Your registration will be reviewed to check if you're eligible. Please contact your provider to find out the outcome.</p>
{% endset %}

{% block content %}

  <h1 class="govuk-heading-xl">
    {% if (data['choosenpq'] == "Early headship coaching offer") %}
      Your registration
    {% else %}
      Your NPQ registration
    {% endif %}
  </h1>

  {{ govukSummaryList({
    card: {
      title: {
        text: "Course details"
      }
    },
    rows: [
      {
        key: {
          text: "Course"
        },
        value: {
          html: npqNameHTML
        },
        actions: {
          items: [
            {
              href: "change-course/choose-npq",
              text: "Change course"
            }
          ]
        }
      },
      {
        key: {
          text: "Provider"
        },
        value: {
          html: providerHTML
        },
        actions: {
          items: [
            {
              href: "change-provider/choose-provider",
              text: "Change provider"
            }
          ]
        }
      },
      {
        key: {
          text: "Provider application"
        },
        value: {
          html:
            '<strong class="govuk-tag govuk-tag--yellow">
              Apply with provider
            </strong>
            <p class="govuk-!-margin-top-2">You need to apply separately with your training provider, if you have not done so already. </p>'
        }
      },
      {
        key: {
          text: "Course status"
        },
        value: {
          html:
            '<strong class="govuk-tag govuk-tag--grey">
              Not started
            </strong>'
        }
      }
    ]
  }) }}

  {{ govukSummaryList({
    card: {
      title: {
        text: "Funding details"
      }
    },
    rows: [
      {
        key: {
          text: "Scholarship funding"
        },
        value: {
          html: scholarshipfundingHtml
        }
      }
    ]
  }) }}

  {{ govukSummaryList({
    card: {
      title: {
        text: "Personal details"
      }
    },
    rows: [
      {
        key: {
          html: '<a href="https://get-an-identity-prototype.herokuapp.com/account/interstitial">Visit your DfE Identity account</a> to check or change your personal details.',
          classes: 'govuk-!-width-full govuk-!-font-weight-regular'
        }
      }
    ]
  }) }}

  {% include 'includes/registration-status/work-details.html' %}

  <div class="govuk-rows" style="margin-top: 60px">
    <h2 class="govuk-heading-l">Register for an NPQ</h2>
    <p>Use this service to submit a new registration</p>

    {{ govukButton({
      text: "Register for an NPQ",
      href: "/chosen"
    }) }}
  </div>

  {% include 'includes/prototype-links.html' %}

{% endblock %}
